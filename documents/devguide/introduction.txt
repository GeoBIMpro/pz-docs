# Introduction

The core functionality of Piazza is split up into several internal components that are shown in the below diagram. The purpose of this section is to provide an overview of these core components, and how interactions between these components are defined.

image::images/overview.jpg[title="Piazza Component Overview"]

For users, the primary interface of Piazza is through the Gateway. The Gateway defines a REST API that contains endpoints used to interact with internal Piazza components in order to perform actions such as load and retrieval data, registration and execution services, and registation of workflow events or triggers. The requests and responses from the Gateway are defined via JSON. The Gateway acts as an external broker, or proxy, to the internal components of the Piazza application. The Gateway will receive user requests, and then route that request or command to the appropriate internal Piazza component. In this way, the user deals with only a single Piazza component - the Gateway - in order to achieve all of their functionality. This provides Piazza with a convenient single point-of-access that allows for authentication and authorization and detailed logging of all incoming requests. By design, the internal Piazza components are masked to external users, and are not able to be accessed directly.

Communication between the Gateway and the internal core components is done one of two ways. First, for most synchronous calls (such as data retrieval of querying), the internal Piazza components will define REST endpoints that Gateway will proxy user requests to; Gateway will then await responses from this request and proxy along the response back to the user. In this scenario, the Gateway is functionally just a simple proxy that provides functionality for internal Piazza components. Second, for requests that are asynchronous by nature (such as executing a long-running service, or loading a very large dataset) the Gateway will then produce messages to a Kafka broker. Internal Piazza components that are delegated to handle these messages will have Kafka consumers defined to subscribe to these messages, and upon receiving an appropriate message, will begin work on handling that request. The Gateway will return a handle to this long-running process that the user can then use to retrieve the status, and subsequent results, of that process.

